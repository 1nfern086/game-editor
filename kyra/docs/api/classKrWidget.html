<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>KrWidget class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.11.1 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>KrWidget  Class Reference</h1>This is the base of any Kyra widget. 
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="widget_8h-source.html">widget.h</a>&gt;</code>
<p>
<p>Inheritance diagram for KrWidget::
<p><center><img src="classKrWidget.gif" usemap="#KrWidget_map" border="0"></center>
<map name="KrWidget_map">
<area href="classKrImNode.html" alt="KrImNode" shape="rect" coords="302,0,413,24">
<area href="classIKrWidgetListener.html" alt="IKrWidgetListener" shape="rect" coords="423,0,534,24">
<area href="classKrButton.html" alt="KrButton" shape="rect" coords="60,112,171,136">
<area href="classKrConsole.html" alt="KrConsole" shape="rect" coords="181,112,292,136">
<area href="classKrImageListBox.html" alt="KrImageListBox" shape="rect" coords="302,112,413,136">
<area href="classKrListBox.html" alt="KrListBox" shape="rect" coords="423,112,534,136">
<area href="classKrProgress.html" alt="KrProgress" shape="rect" coords="544,112,655,136">
<area href="classKrTextWidget.html" alt="KrTextWidget" shape="rect" coords="665,112,776,136">
<area href="classKrPushButton.html" alt="KrPushButton" shape="rect" coords="0,168,111,192">
<area href="classKrToggleButton.html" alt="KrToggleButton" shape="rect" coords="121,168,232,192">
</map>
<a href="classKrWidget-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Public Methods</h2></td></tr>
<tr><td nowrap align=right valign=top><a name="a1" doxytag="KrWidget::ToWidget"></a>
virtual KrWidget *&nbsp;</td><td valign=bottom><a class="el" href="classKrWidget.html#a1">ToWidget</a> ()</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Return a pointer if this is a widget.</em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classKrWidget.html#a2">AddListener</a> (<a class="el" href="classIKrWidgetListener.html">IKrWidgetListener</a> *)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Add a pointer to a class that listens to this widget.</em> <a href="#a2">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a name="a3" doxytag="KrWidget::RemoveListener"></a>
void&nbsp;</td><td valign=bottom><a class="el" href="classKrWidget.html#a3">RemoveListener</a> (<a class="el" href="classIKrWidgetListener.html">IKrWidgetListener</a> *)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Remove a listener. Can be called at any time, even during a callback.</em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>virtual int&nbsp;</td><td valign=bottom><a class="el" href="classKrWidget.html#a4">IsMouseListener</a> ()</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>IsMouseListener returns whether this is a mouse listener or not, and which buttons are listened to.</em> <a href="#a4">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a name="a5" doxytag="KrWidget::MouseIn"></a>
virtual void&nbsp;</td><td valign=bottom><a class="el" href="classKrWidget.html#a5">MouseIn</a> (bool down, bool in)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em><dl compact><dt><b>
See also: </b><dd>
<a class="el" href="classKrWidget.html#a4">IsMouseListener</a>.</dl></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a name="a6" doxytag="KrWidget::MouseMove"></a>
virtual void&nbsp;</td><td valign=bottom><a class="el" href="classKrWidget.html#a6">MouseMove</a> (bool down, int x, int y)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em><dl compact><dt><b>
See also: </b><dd>
<a class="el" href="classKrWidget.html#a4">IsMouseListener</a>.</dl></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a name="a7" doxytag="KrWidget::MouseClick"></a>
virtual void&nbsp;</td><td valign=bottom><a class="el" href="classKrWidget.html#a7">MouseClick</a> (int click, int x, int y)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em><dl compact><dt><b>
See also: </b><dd>
<a class="el" href="classKrWidget.html#a4">IsMouseListener</a>.</dl></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a name="a17" doxytag="KrWidget::HandleWidgetEvent"></a>
virtual bool&nbsp;</td><td valign=bottom><a class="el" href="classKrWidget.html#a17">HandleWidgetEvent</a> (KrWidget *source, U32 event, U32 data, const SDL_Event *sdlEvent, const char *command, const char *arg)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Handle SDL events, return true if handled, false if not ours.</em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a name="a18" doxytag="KrWidget::ParentWidget"></a>
KrWidget *&nbsp;</td><td valign=bottom><a class="el" href="classKrWidget.html#a18">ParentWidget</a> ()</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Find the parent of the widget that is also a widget.</em></font><br><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This is the base of any Kyra widget.
<p>
A widget is much like any other Kyra image object. You new it, add it to the <a class="el" href="classKrImageTree.html">KrImageTree</a>, and it is drawn as part of the Draw() pass.
<p>
Widgets don't have resources, but do use schemes which are similar.
<p>
Widgets get their events from an event manager. If you use widgets, you must therefore send events to the <a class="el" href="classKrEventManager.html">KrEventManager</a> class. Widgets  generally need SDL_EnableUNICODE( true ) to function correctly.
<p>
Widgets broadcast their events to "listeners." To register a class as a listener, call <a class="el" href="classKrWidget.html#a2">AddListener</a>(). The class will then receive  notification of events. The event each widget broadcast is documented on a per-widget basis.
<p>
A widget subclass can implement any of the following properties:
<p>
<ul>
<li>MouseListeners receieve and can respond to mouse events.<li>KeyListeners get keyboard focus and key messages. They grab key focus with the "tab" key or if clicked on.<li>Selectable widgets have state. They can be on/off, up/down, or whatever. A <a class="el" href="classKrToggleButton.html">KrToggleButton</a> is a selectable widget.<li>Groupable widgets are in a group, and are aware of other widgets  in that group. Radio Buttons are groupable.<li>Some widgets can respond to accelerator keys. Use SetAccelerator to specify a hotkey to pass to the widget.</ul>
Widgets can be nested and you can query for parents. However, Kyra regards the widget model as flat and doesn't pay attention to the nesting, with one important exception: a key event that isn't handled by a widget will be passed through its parent chain. For example, a <a class="el" href="classKrConsole.html">KrConsole</a> uses a <a class="el" href="classKrTextWidget.html">KrTextWidget</a>. If the <a class="el" href="classKrTextWidget.html">KrTextWidget</a> doesn't handle a  particular key, it will get passed up to the <a class="el" href="classKrConsole.html">KrConsole</a>.
<p>
WARNING: You may want to use Widgets in window 0, if you are using multiple Kyra windows. They are not fully tested in higher window numbers. You may see placement or bounding errors in higher window numbers.
<p>
Notes for implementing your own widgets:
<p>
<ul>
<li>All Widgets are of the type <a class="el" href="classKrWidget.html#a1">ToWidget</a>(). To get a particular flavor, the <a class="el" href="classKrImNode.html#a23">ToExtended</a>() method can be used.<li>Widgets should initialize themselves in the AddedtoTree() method. When the engine calls your AddedtoTree() method, you can add chilren because you are already in the Tree(). Be sure to call the parent KrWidget::AddedtoTree() as well!<li>If you have been added to the Tree(), your <a class="el" href="classKrImNode.html#a53">Engine</a>() pointer will be non-null. </ul>

<p>
<hr><h2>Member Function Documentation</h2>
<a name="a2" doxytag="KrWidget::AddListener"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void KrWidget::AddListener </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classIKrWidgetListener.html">IKrWidgetListener</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Add a pointer to a class that listens to this widget.
<p>
It can be added at any time (even a callback.) It should not be deleted without calling RemoveListener.     </td>
  </tr>
</table>
<a name="a4" doxytag="KrWidget::IsMouseListener"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> virtual int KrWidget::IsMouseListener </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [inline, virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
IsMouseListener returns whether this is a mouse listener or not, and which buttons are listened to.
<p>
A return value of 0 is no listening. Else it can return an OR mask of the buttons ( LEFT_MOUSE, RIGHT_MOUSE, MIDDLE_MOUSE ) it wants to listen for mouse clicks.
<p>
The simple case is to only listen to the left mouse, in which case return LEFT_MOUSE (1). The click messages can then be treated like a boolean for the left mouse (1 is down, 0 is up.)
<p>
Currently, with version 2.0, only the LEFT_MOUSE is supported.
<p>
MouseIn is called when a mouse moves in to the widget. The 'down' parameter reflects the state of the left mouse button. The 'in' reflects whether it is moving to the widget (true) or away from the widget (false).
<p>
MouseMove reports when the mouse moves over this widget.
<p>
MouseClick is called when the mouse is clicked on this widget. The 'click' param will have a single value (not OR mask) of LEFT_UP, LEFT_DOWN, RIGHT_UP, etc. with x and y coordinates of the action.
<p>
In the simple case that you are only listening to the left mouse, the parameter will be essentially a boolean: 1 for the left mouse down, 0 for the left mouse up. 
<p>
Reimplemented in <a class="el" href="classKrPushButton.html#a2">KrPushButton</a>, <a class="el" href="classKrToggleButton.html#a2">KrToggleButton</a>, <a class="el" href="classKrTextWidget.html#a2">KrTextWidget</a>, and <a class="el" href="classKrImageListBox.html#a9">KrImageListBox</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="widget_8h-source.html">widget.h</a></ul>
<hr><address><small>Generated on Fri Feb 7 20:44:21 2003 for Kyra by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.11.1 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
