<html><!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 2K.1beta (1.48)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Running EiC in script mode</TITLE>
<META NAME="description" CONTENT="Running EiC in script mode">
<META NAME="keywords" CONTENT="EiC">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="Generator" CONTENT="LaTeX2HTML v2K.1beta">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="EiC.css" tppabs="http://eic.sourceforge.net/documentation/EiC.css">

<LINK REL="previous" HREF="node14.html" tppabs="http://eic.sourceforge.net/documentation/node14.html">
<LINK REL="up" HREF="node14.html" tppabs="http://eic.sourceforge.net/documentation/node14.html">
<LINK REL="next" HREF="node16.html" tppabs="http://eic.sourceforge.net/documentation/node16.html">
</HEAD>
<body bgcolor="ffffff" text="3e3e64" link="863644" vlink="8e4e5c" alink="8e4e5c">
<!-- StArT-EiC-top-LiNe -->
<table border="0" cellspacing="0" width="100%">
<tr>
<td bgcolor="3e3e64" align="center"><font size="4" color="999999">
#!/usr/bin/eic -f
</td></font>
<td bgcolor="3e3e64" align="center"><font size="3" color="999999">
int main() { printf("Hello World!\n"); return 0; }
</td></font>
<td bgcolor="3e3e64" align="center"><font size="3" color="999999">
EiC 1> Hello World!;
</td></font>
</table>
<!-- EnD-EiC-top-LiNe -->
<blockquote>
<!-- Begin-EiC-logo -->
<img src="logo.gif" tppabs="http://eic.sourceforge.net/images/logo.gif" border="0"><br>  
<!-- End-EiC-logo -->
</blockquote>
<hr size="1" width="93%">
<!-- The master table that contains the left nav bar and the right-side
     page text... -->
<table border="0">
<tr>
   <!-- Begin navbar -->
<td valign="top">
   <a href="javascript:if(confirm('http://eic.sourceforge.net/index.html  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://eic.sourceforge.net/index.html'" tppabs="http://eic.sourceforge.net/index.html"><img border="0" src="navbar_news.gif" tppabs="http://eic.sourceforge.net/images/navbar_news.gif"></a><br>
   <a href="javascript:if(confirm('http://eic.sourceforge.net/overview/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://eic.sourceforge.net/overview/'" tppabs="http://eic.sourceforge.net/overview/"><img border="0" src="navbar_overview.gif" tppabs="http://eic.sourceforge.net/images/navbar_overview.gif"></a><br>
   <a href="index.htm" tppabs="http://eic.sourceforge.net/documentation/"><img border="0" src="navbar_documentation.gif" tppabs="http://eic.sourceforge.net/images/navbar_documentation.gif"></a></br>
   <a href="javascript:if(confirm('http://eic.sourceforge.net/download/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://eic.sourceforge.net/download/'" tppabs="http://eic.sourceforge.net/download/"><img border="0" src="navbar_download.gif" tppabs="http://eic.sourceforge.net/images/navbar_download.gif"></a><br>
   <a href="javascript:if(confirm('http://eic.sourceforge.net/addons/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://eic.sourceforge.net/addons/'" tppabs="http://eic.sourceforge.net/addons/"><img border="0" src="navbar_addons.gif" tppabs="http://eic.sourceforge.net/images/navbar_addons.gif"></a><br>
   <a href="javascript:if(confirm('http://eic.sourceforge.net/links.html  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://eic.sourceforge.net/links.html'" tppabs="http://eic.sourceforge.net/links.html"><img border="0" src="navbar_links.gif" tppabs="http://eic.sourceforge.net/images/navbar_links.gif"></a><br>
   <a href="javascript:if(confirm('http://eic.sourceforge.net/support/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://eic.sourceforge.net/support/'" tppabs="http://eic.sourceforge.net/support/"><img border="0" src="navbar_support.gif" tppabs="http://eic.sourceforge.net/images/navbar_support.gif"></a><br>
<br><br>
<!-- Begin sponsors -->
 <font size = "-1"> Sponsors:<br> </font>
 <a href="javascript:if(confirm('http://sourceforge.net/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://sourceforge.net/'" tppabs="http://sourceforge.net/"><img src="sflogo.php-group_id=6113&type=4" tppabs="http://sourceforge.net/sflogo.php?group_id=6113&type=4" width="125" height="38" border="0" alt="SourceForge.net Logo"></a> <br>
<!-- End sponsors -->
</td>
   <!-- End navbar -->
   <!-- Begin right-side page data -->
<td valign="top">  <font size="3" face="Helvetica">
<!--Navigation Panel-->
<A NAME="tex2html537"
  HREF="node16.html" tppabs="http://eic.sourceforge.net/documentation/node16.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png" tppabs="http://eic.sourceforge.net/documentation/next.png"></A> 
<A NAME="tex2html531"
  HREF="node14.html" tppabs="http://eic.sourceforge.net/documentation/node14.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png" tppabs="http://eic.sourceforge.net/documentation/up.png"></A> 
<A NAME="tex2html527"
  HREF="node14.html" tppabs="http://eic.sourceforge.net/documentation/node14.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png" tppabs="http://eic.sourceforge.net/documentation/prev.png"></A> 
<A NAME="tex2html533"
  HREF="node1.html" tppabs="http://eic.sourceforge.net/documentation/node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png" tppabs="http://eic.sourceforge.net/documentation/contents.png"></A> 
<A NAME="tex2html535"
  HREF="node166.html" tppabs="http://eic.sourceforge.net/documentation/node166.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png" tppabs="http://eic.sourceforge.net/documentation/index.png"></A> 
<BR>
<B> Next:</B> <A NAME="tex2html538"
  HREF="node16.html" tppabs="http://eic.sourceforge.net/documentation/node16.html">Embedding or linking to</A>
<B> Up:</B> <A NAME="tex2html532"
  HREF="node14.html" tppabs="http://eic.sourceforge.net/documentation/node14.html">EiC non-interactive mode</A>
<B> Previous:</B> <A NAME="tex2html528"
  HREF="node14.html" tppabs="http://eic.sourceforge.net/documentation/node14.html">EiC non-interactive mode</A>
 &nbsp <B>  <A NAME="tex2html534"
  HREF="node1.html" tppabs="http://eic.sourceforge.net/documentation/node1.html">Contents</A></B> 
 &nbsp <B>  <A NAME="tex2html536"
  HREF="node166.html" tppabs="http://eic.sourceforge.net/documentation/node166.html">Index</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->

<H3><A NAME="SECTION00327100000000000000"></A>
<A NAME="sec:ScriptMode"></A><A NAME="837"></A>
<A NAME="838"></A>
<BR>
Running EiC in script mode
</H3>

<P>
In non-interactive mode EiC runs generally like a typical
interpreter, accepting input from a complete C program. However, EiC
can also run shell scripts non-interactively. For the following
examples, in this section only, it will be assumed that you are in
EiC's directory <B><TT>../EiC/module/examples</TT></B> and that
<B><TT>eic</TT></B> is installed in <B><TT>/usr/local/bin</TT></B>.

<P>
Below is an example of an EiC script, called <B><TT>hello.eic</TT></B>:<PRE>
#!/usr/local/bin/eic -f

#include &lt;stdio.h&gt;
printf(" ******* Hello from EiC's script mode. ******\n");
</PRE>
The <B><TT>-f</TT></B><A NAME="848"></A> command-line switch, informs
EiC to run in script mode.  In script mode, EiC will treat all lines
beginning with <B><TT>#</TT></B> and which cannot be interpreted as a
preprocessor directive (see&nbsp;Chapter&nbsp;<A HREF="node22.html#chp:Preprocessor" tppabs="http://eic.sourceforge.net/documentation/node22.html#chp:Preprocessor">2</A>, pg:&nbsp;<A HREF="node22.html#chp:Preprocessor" tppabs="http://eic.sourceforge.net/documentation/node22.html#chp:Preprocessor"><IMG  ALIGN="BOTTOM" BORDER="1" ALT="[*]" SRC="crossref.png" tppabs="http://eic.sourceforge.net/documentation/crossref.png"></A>) as a comment. To
run the above script and assuming that it's executable
(chmod&nbsp;+x&nbsp;hello.eic):

<P><PRE>
% ./hello.eic
 ******* Hello from EiC's script mode. ******
%
</PRE>

<P>
Another example of an EiC script is given in <B><TT>script1.eic</TT></B>:

<P><PRE>
 1     #!/usr/local/bin/eic -f 
 2     #include &lt;stdio.h&gt;
 3
 4     // example of control of flow
 5     int i;
 6     int isqr(int x) { return x*x; }
 7     for(i=0;i&lt;4;i++)
 8             printf("%d^2 =  %d\n",i,isqr(i));
 9     switch(i) {
10             case 4: printf(" good\n\n"); break;
11             default: printf(" bad\n\n");
12     }
13     // example of some file stuff;
14     // read in some tools
15     #include "tools/nxtString.c"
16     FILE *fp = fopen(_Argv[0],"r");
17     char *p;
18     while((p=nxtString(fp)))
19             printf("%s ",p);
20     fclose(fp);
21     printf("\n\n");
22     // further example of using command line args
23     if(_Argc) { // this is always true
24             int k=0;
25             printf("Processing command line arguments\n");
26             for(k=0;k&lt;_Argc;k++) {
27                    printf("%s\n",_Argv[k]);
28             }
29    } else
30             printf("OOPS, an internal error has occurred\n");
</PRE>

<P>
An EiC shell script is interpreted from the top to the bottom. First
the code is compiled to byetcode, in its entirety, and then run. After
this, control will be parsed to the <B><TT>main</TT></B> function if it
exists. However, it is not illegal to have a script that does not
include the definition of a <B><TT>main</TT></B> function. If the EiC directive
<B><TT>:exit</TT></B> (as discussed on pg:&nbsp;<A HREF="node21.html#item:exit" tppabs="http://eic.sourceforge.net/documentation/node21.html#item:exit"><IMG  ALIGN="BOTTOM" BORDER="1" ALT="[*]" SRC="crossref.png" tppabs="http://eic.sourceforge.net/documentation/crossref.png"></A>) is present in such
a script it will cause it to halt at the position
<B><TT>:exit</TT></B> is encounted and nothing will happen other than having the code
upto <B><TT>:exit</TT></B> compiled and parsed but it will not have been
executed.  Generally, the code for a fuction is not executed until it
is called, see line 8. Command line arguments are passed into to the
global variables <B><TT>_Argc</TT></B> and
<B><TT>_Argv</TT></B>, see lines 16 and 23 to 30. For example:<PRE>
% script1.eic  abc 123 -DHELP
</PRE>
Implies that:<PRE>
_Argc = 4,                 _Argv[0] = "sript1.eic"    
_Argv[1] = "abc"           _Argv[2] = "123"
_Argv[3] = "-DHELP"        _Argv[4] = NULL
</PRE>

<P>
To alter the behaviour of EiC during script-mode just add the
appropriate switch to the first line of the script, as seen for <B><TT>-f</TT></B>
on line 1 above. 

<P>
<HR>
<!--Navigation Panel-->
<A NAME="tex2html537"
  HREF="node16.html" tppabs="http://eic.sourceforge.net/documentation/node16.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png" tppabs="http://eic.sourceforge.net/documentation/next.png"></A> 
<A NAME="tex2html531"
  HREF="node14.html" tppabs="http://eic.sourceforge.net/documentation/node14.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png" tppabs="http://eic.sourceforge.net/documentation/up.png"></A> 
<A NAME="tex2html527"
  HREF="node14.html" tppabs="http://eic.sourceforge.net/documentation/node14.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png" tppabs="http://eic.sourceforge.net/documentation/prev.png"></A> 
<A NAME="tex2html533"
  HREF="node1.html" tppabs="http://eic.sourceforge.net/documentation/node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png" tppabs="http://eic.sourceforge.net/documentation/contents.png"></A> 
<A NAME="tex2html535"
  HREF="node166.html" tppabs="http://eic.sourceforge.net/documentation/node166.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png" tppabs="http://eic.sourceforge.net/documentation/index.png"></A> 
<BR>
<B> Next:</B> <A NAME="tex2html538"
  HREF="node16.html" tppabs="http://eic.sourceforge.net/documentation/node16.html">Embedding or linking to</A>
<B> Up:</B> <A NAME="tex2html532"
  HREF="node14.html" tppabs="http://eic.sourceforge.net/documentation/node14.html">EiC non-interactive mode</A>
<B> Previous:</B> <A NAME="tex2html528"
  HREF="node14.html" tppabs="http://eic.sourceforge.net/documentation/node14.html">EiC non-interactive mode</A>
 &nbsp <B>  <A NAME="tex2html534"
  HREF="node1.html" tppabs="http://eic.sourceforge.net/documentation/node1.html">Contents</A></B> 
 &nbsp <B>  <A NAME="tex2html536"
  HREF="node166.html" tppabs="http://eic.sourceforge.net/documentation/node166.html">Index</A></B> 
<!--End of Navigation Panel-->
<ADDRESS>
</td> <!-- End right-side page text -->
</tr> 
</table>
<!-- End master table -->
</ADDRESS>
</BODY>
</HTML>
