<html><!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 2K.1beta (1.48)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Function declarations</TITLE>
<META NAME="description" CONTENT="Function declarations">
<META NAME="keywords" CONTENT="EiC">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="Generator" CONTENT="LaTeX2HTML v2K.1beta">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="EiC.css" tppabs="http://eic.sourceforge.net/documentation/EiC.css">

<LINK REL="next" HREF="node84.html" tppabs="http://eic.sourceforge.net/documentation/node84.html">
<LINK REL="previous" HREF="node82.html" tppabs="http://eic.sourceforge.net/documentation/node82.html">
<LINK REL="up" HREF="node40.html" tppabs="http://eic.sourceforge.net/documentation/node40.html">
<LINK REL="next" HREF="node84.html" tppabs="http://eic.sourceforge.net/documentation/node84.html">
</HEAD>
<body bgcolor="ffffff" text="3e3e64" link="863644" vlink="8e4e5c" alink="8e4e5c">
<!-- StArT-EiC-top-LiNe -->
<table border="0" cellspacing="0" width="100%">
<tr>
<td bgcolor="3e3e64" align="center"><font size="4" color="999999">
#!/usr/bin/eic -f
</td></font>
<td bgcolor="3e3e64" align="center"><font size="3" color="999999">
int main() { printf("Hello World!\n"); return 0; }
</td></font>
<td bgcolor="3e3e64" align="center"><font size="3" color="999999">
EiC 1> Hello World!;
</td></font>
</table>
<!-- EnD-EiC-top-LiNe -->
<blockquote>
<!-- Begin-EiC-logo -->
<img src="logo.gif" tppabs="http://eic.sourceforge.net/images/logo.gif" border="0"><br>  
<!-- End-EiC-logo -->
</blockquote>
<hr size="1" width="93%">
<!-- The master table that contains the left nav bar and the right-side
     page text... -->
<table border="0">
<tr>
   <!-- Begin navbar -->
<td valign="top">
   <a href="javascript:if(confirm('http://eic.sourceforge.net/index.html  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://eic.sourceforge.net/index.html'" tppabs="http://eic.sourceforge.net/index.html"><img border="0" src="navbar_news.gif" tppabs="http://eic.sourceforge.net/images/navbar_news.gif"></a><br>
   <a href="javascript:if(confirm('http://eic.sourceforge.net/overview/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://eic.sourceforge.net/overview/'" tppabs="http://eic.sourceforge.net/overview/"><img border="0" src="navbar_overview.gif" tppabs="http://eic.sourceforge.net/images/navbar_overview.gif"></a><br>
   <a href="index.htm" tppabs="http://eic.sourceforge.net/documentation/"><img border="0" src="navbar_documentation.gif" tppabs="http://eic.sourceforge.net/images/navbar_documentation.gif"></a></br>
   <a href="javascript:if(confirm('http://eic.sourceforge.net/download/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://eic.sourceforge.net/download/'" tppabs="http://eic.sourceforge.net/download/"><img border="0" src="navbar_download.gif" tppabs="http://eic.sourceforge.net/images/navbar_download.gif"></a><br>
   <a href="javascript:if(confirm('http://eic.sourceforge.net/addons/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://eic.sourceforge.net/addons/'" tppabs="http://eic.sourceforge.net/addons/"><img border="0" src="navbar_addons.gif" tppabs="http://eic.sourceforge.net/images/navbar_addons.gif"></a><br>
   <a href="javascript:if(confirm('http://eic.sourceforge.net/links.html  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://eic.sourceforge.net/links.html'" tppabs="http://eic.sourceforge.net/links.html"><img border="0" src="navbar_links.gif" tppabs="http://eic.sourceforge.net/images/navbar_links.gif"></a><br>
   <a href="javascript:if(confirm('http://eic.sourceforge.net/support/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://eic.sourceforge.net/support/'" tppabs="http://eic.sourceforge.net/support/"><img border="0" src="navbar_support.gif" tppabs="http://eic.sourceforge.net/images/navbar_support.gif"></a><br>
<br><br>
<!-- Begin sponsors -->
 <font size = "-1"> Sponsors:<br> </font>
 <a href="javascript:if(confirm('http://sourceforge.net/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://sourceforge.net/'" tppabs="http://sourceforge.net/"><img src="sflogo.php-group_id=6113&type=4" tppabs="http://sourceforge.net/sflogo.php?group_id=6113&type=4" width="125" height="38" border="0" alt="SourceForge.net Logo"></a> <br>
<!-- End sponsors -->
</td>
   <!-- End navbar -->
   <!-- Begin right-side page data -->
<td valign="top">  <font size="3" face="Helvetica">
<!--Navigation Panel-->
<A NAME="tex2html1606"
  HREF="node84.html" tppabs="http://eic.sourceforge.net/documentation/node84.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png" tppabs="http://eic.sourceforge.net/documentation/next.png"></A> 
<A NAME="tex2html1600"
  HREF="node40.html" tppabs="http://eic.sourceforge.net/documentation/node40.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png" tppabs="http://eic.sourceforge.net/documentation/up.png"></A> 
<A NAME="tex2html1594"
  HREF="node82.html" tppabs="http://eic.sourceforge.net/documentation/node82.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png" tppabs="http://eic.sourceforge.net/documentation/prev.png"></A> 
<A NAME="tex2html1602"
  HREF="node1.html" tppabs="http://eic.sourceforge.net/documentation/node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png" tppabs="http://eic.sourceforge.net/documentation/contents.png"></A> 
<A NAME="tex2html1604"
  HREF="node166.html" tppabs="http://eic.sourceforge.net/documentation/node166.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png" tppabs="http://eic.sourceforge.net/documentation/index.png"></A> 
<BR>
<B> Next:</B> <A NAME="tex2html1607"
  HREF="node84.html" tppabs="http://eic.sourceforge.net/documentation/node84.html">Function types</A>
<B> Up:</B> <A NAME="tex2html1601"
  HREF="node40.html" tppabs="http://eic.sourceforge.net/documentation/node40.html">EiC's C Specifications</A>
<B> Previous:</B> <A NAME="tex2html1595"
  HREF="node82.html" tppabs="http://eic.sourceforge.net/documentation/node82.html">Variable declaration placement</A>
 &nbsp <B>  <A NAME="tex2html1603"
  HREF="node1.html" tppabs="http://eic.sourceforge.net/documentation/node1.html">Contents</A></B> 
 &nbsp <B>  <A NAME="tex2html1605"
  HREF="node166.html" tppabs="http://eic.sourceforge.net/documentation/node166.html">Index</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->

<H1><A NAME="SECTION005170000000000000000"></A>
<A NAME="sec:FunctionDeclarations"></A><A NAME="7249"></A>
<BR>
Function declarations
</H1>

<P>
In this section I will first present a quick overview  to function
usage in EiC before looking at the details.

<P>
EiC attempts to be type safe; therefore,
in order for EiC to check the validity of a function call during
compilation, it is important that the function prototype be available.
In EiC, the prototype form can be extracted from either the function
definition or declaration. Hence, all function declarations must be in
prototype form<A NAME="7250"></A>; that is, provide the
name of the function, the types of its parameters and the return type
of the function.

<P>
The two following prototypes are considered equivalent: 

<P><PRE>
        int swap(int *, int *);    /* prototype declaration */ 
        int swap(int *a, int *b);  /* full prototype declaration */
</PRE>

<P>
The latter form is referred to as a declaration in full prototype
form, because it includes the parameter names. However, for convenience
and to increase backward compatibility, EiC, allows one type of
non-prototype declaration:

<P><PRE>
        void f();   /* allowable non-prototype declaration */
</PRE>

<P>
The above declaration will be compatible with other prototype
declarations and definitions if: it matches the return type; the
arguments declared in the prototype form will not be subject to
typical argument conversions, such as <B><TT>float</TT></B> to <B><TT>double</TT></B>; and the
prototype form does not declare a variadic function:

<P>


<BLOCKQUOTE></BLOCKQUOTE><PRE>
EiC 1&gt; int round(double x) { if(x&gt;0) return x+0.5; else return x-0.5;} 
EiC 2&gt; int sum(int x, int y) { return x + y;}
EiC 3&gt; int foo(float var) { return var;}
EiC 4&gt; int (*pf)();    // declare a function pointer
EiC 5&gt; pf = round;    
EiC 6&gt; pf = sum;      
EiC 7&gt; pf = foo;       
Warning: in ::EiC:: near line 7: Suspicious pointer conversion
</PRE><BLOCKQUOTE></BLOCKQUOTE>
<P>
EiC deems the assignment on line 7 to be suspicious, because the function
<B><TT>foo</TT></B> accepts an argument of type <B><TT>float</TT></B>, and because all 
floating point values passed via <B><TT>pf</TT></B> will be automatically cast to
type <B><TT>double</TT></B>. Also, as seen above, allowing a function declaration
to take no variables is different from declaring it to take
<B><TT>void</TT></B>. In the latter case, it implies that the function will accept
no arguments; in the former case, it means that the function will
accept any number of arguments, which do not undergo automatic
conversion. The advantage of the former is obvious when working with a
function pointer that may point to various other types of functions -
although it does have limitations.

<P>
As already stated, before any function can be called from another
function, EiC must have either processed the function's definition or
the prototype form of the function. This is because there are no
implicit parameters in EiC,
EiC carries out strict variable type checking and it verifies all
parameter types being passed between functions; for example:

<P><PRE>
#include &lt;stdio.h&gt;
void f() { g(); }    /* error: unknown identifier g */
void g() { printf("Hello, world!\n"); }
</PRE>

<P>
To fix this, two alternatives are possible: 1) place <TT>g</TT>'s
definition before <TT>f</TT>'s, or 2) add <TT>g</TT>'s prototype either
before <TT>f</TT>'s definition or within <TT>f</TT>:<PRE>
#include &lt;stdio.h&gt;
void g(void);   
void f() { g(); }    /* okay, g is now known */
void f2() {void g(); g();}  /* okay */ 
void g() { printf("Hello, world!\n"); }
</PRE>

<P>
Choice 1 is okay here, but would fail if the two functions were
mutually recursive; therefore, choice 2 is the more general. However,
in EiC there are no private declarations for functions, as function
<TT>f2</TT> is implying. In EiC the above definition for <TT>f2</TT> is
identical to:

<P><PRE>
void f2() {extern void g(); g();}  /* okay */
</PRE>

<P>
Hence, all function declarations within a function are exported to
the level of a function definition. 

<P>
<HR>
<!--Navigation Panel-->
<A NAME="tex2html1606"
  HREF="node84.html" tppabs="http://eic.sourceforge.net/documentation/node84.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png" tppabs="http://eic.sourceforge.net/documentation/next.png"></A> 
<A NAME="tex2html1600"
  HREF="node40.html" tppabs="http://eic.sourceforge.net/documentation/node40.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png" tppabs="http://eic.sourceforge.net/documentation/up.png"></A> 
<A NAME="tex2html1594"
  HREF="node82.html" tppabs="http://eic.sourceforge.net/documentation/node82.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png" tppabs="http://eic.sourceforge.net/documentation/prev.png"></A> 
<A NAME="tex2html1602"
  HREF="node1.html" tppabs="http://eic.sourceforge.net/documentation/node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png" tppabs="http://eic.sourceforge.net/documentation/contents.png"></A> 
<A NAME="tex2html1604"
  HREF="node166.html" tppabs="http://eic.sourceforge.net/documentation/node166.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png" tppabs="http://eic.sourceforge.net/documentation/index.png"></A> 
<BR>
<B> Next:</B> <A NAME="tex2html1607"
  HREF="node84.html" tppabs="http://eic.sourceforge.net/documentation/node84.html">Function types</A>
<B> Up:</B> <A NAME="tex2html1601"
  HREF="node40.html" tppabs="http://eic.sourceforge.net/documentation/node40.html">EiC's C Specifications</A>
<B> Previous:</B> <A NAME="tex2html1595"
  HREF="node82.html" tppabs="http://eic.sourceforge.net/documentation/node82.html">Variable declaration placement</A>
 &nbsp <B>  <A NAME="tex2html1603"
  HREF="node1.html" tppabs="http://eic.sourceforge.net/documentation/node1.html">Contents</A></B> 
 &nbsp <B>  <A NAME="tex2html1605"
  HREF="node166.html" tppabs="http://eic.sourceforge.net/documentation/node166.html">Index</A></B> 
<!--End of Navigation Panel-->
<ADDRESS>
</td> <!-- End right-side page text -->
</tr> 
</table>
<!-- End master table -->
</ADDRESS>
</BODY>
</HTML>
