<html><!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 2K.1beta (1.48)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Multiplexed interfacing</TITLE>
<META NAME="description" CONTENT="Multiplexed interfacing">
<META NAME="keywords" CONTENT="EiC">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="Generator" CONTENT="LaTeX2HTML v2K.1beta">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="EiC.css" tppabs="http://eic.sourceforge.net/documentation/EiC.css">

<LINK REL="next" HREF="node161.html" tppabs="http://eic.sourceforge.net/documentation/node161.html">
<LINK REL="previous" HREF="node159.html" tppabs="http://eic.sourceforge.net/documentation/node159.html">
<LINK REL="up" HREF="node151.html" tppabs="http://eic.sourceforge.net/documentation/node151.html">
<LINK REL="next" HREF="node161.html" tppabs="http://eic.sourceforge.net/documentation/node161.html">
</HEAD>
<body bgcolor="ffffff" text="3e3e64" link="863644" vlink="8e4e5c" alink="8e4e5c">
<!-- StArT-EiC-top-LiNe -->
<table border="0" cellspacing="0" width="100%">
<tr>
<td bgcolor="3e3e64" align="center"><font size="4" color="999999">
#!/usr/bin/eic -f
</td></font>
<td bgcolor="3e3e64" align="center"><font size="3" color="999999">
int main() { printf("Hello World!\n"); return 0; }
</td></font>
<td bgcolor="3e3e64" align="center"><font size="3" color="999999">
EiC 1> Hello World!;
</td></font>
</table>
<!-- EnD-EiC-top-LiNe -->
<blockquote>
<!-- Begin-EiC-logo -->
<img src="logo.gif" tppabs="http://eic.sourceforge.net/images/logo.gif" border="0"><br>  
<!-- End-EiC-logo -->
</blockquote>
<hr size="1" width="93%">
<!-- The master table that contains the left nav bar and the right-side
     page text... -->
<table border="0">
<tr>
   <!-- Begin navbar -->
<td valign="top">
   <a href="javascript:if(confirm('http://eic.sourceforge.net/index.html  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://eic.sourceforge.net/index.html'" tppabs="http://eic.sourceforge.net/index.html"><img border="0" src="navbar_news.gif" tppabs="http://eic.sourceforge.net/images/navbar_news.gif"></a><br>
   <a href="javascript:if(confirm('http://eic.sourceforge.net/overview/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://eic.sourceforge.net/overview/'" tppabs="http://eic.sourceforge.net/overview/"><img border="0" src="navbar_overview.gif" tppabs="http://eic.sourceforge.net/images/navbar_overview.gif"></a><br>
   <a href="index.htm" tppabs="http://eic.sourceforge.net/documentation/"><img border="0" src="navbar_documentation.gif" tppabs="http://eic.sourceforge.net/images/navbar_documentation.gif"></a></br>
   <a href="javascript:if(confirm('http://eic.sourceforge.net/download/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://eic.sourceforge.net/download/'" tppabs="http://eic.sourceforge.net/download/"><img border="0" src="navbar_download.gif" tppabs="http://eic.sourceforge.net/images/navbar_download.gif"></a><br>
   <a href="javascript:if(confirm('http://eic.sourceforge.net/addons/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://eic.sourceforge.net/addons/'" tppabs="http://eic.sourceforge.net/addons/"><img border="0" src="navbar_addons.gif" tppabs="http://eic.sourceforge.net/images/navbar_addons.gif"></a><br>
   <a href="javascript:if(confirm('http://eic.sourceforge.net/links.html  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://eic.sourceforge.net/links.html'" tppabs="http://eic.sourceforge.net/links.html"><img border="0" src="navbar_links.gif" tppabs="http://eic.sourceforge.net/images/navbar_links.gif"></a><br>
   <a href="javascript:if(confirm('http://eic.sourceforge.net/support/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://eic.sourceforge.net/support/'" tppabs="http://eic.sourceforge.net/support/"><img border="0" src="navbar_support.gif" tppabs="http://eic.sourceforge.net/images/navbar_support.gif"></a><br>
<br><br>
<!-- Begin sponsors -->
 <font size = "-1"> Sponsors:<br> </font>
 <a href="javascript:if(confirm('http://sourceforge.net/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://sourceforge.net/'" tppabs="http://sourceforge.net/"><img src="sflogo.php-group_id=6113&type=4" tppabs="http://sourceforge.net/sflogo.php?group_id=6113&type=4" width="125" height="38" border="0" alt="SourceForge.net Logo"></a> <br>
<!-- End sponsors -->
</td>
   <!-- End navbar -->
   <!-- Begin right-side page data -->
<td valign="top">  <font size="3" face="Helvetica">
<!--Navigation Panel-->
<A NAME="tex2html2787"
  HREF="node161.html" tppabs="http://eic.sourceforge.net/documentation/node161.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png" tppabs="http://eic.sourceforge.net/documentation/next.png"></A> 
<A NAME="tex2html2781"
  HREF="node151.html" tppabs="http://eic.sourceforge.net/documentation/node151.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png" tppabs="http://eic.sourceforge.net/documentation/up.png"></A> 
<A NAME="tex2html2775"
  HREF="node159.html" tppabs="http://eic.sourceforge.net/documentation/node159.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png" tppabs="http://eic.sourceforge.net/documentation/prev.png"></A> 
<A NAME="tex2html2783"
  HREF="node1.html" tppabs="http://eic.sourceforge.net/documentation/node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png" tppabs="http://eic.sourceforge.net/documentation/contents.png"></A> 
<A NAME="tex2html2785"
  HREF="node166.html" tppabs="http://eic.sourceforge.net/documentation/node166.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png" tppabs="http://eic.sourceforge.net/documentation/index.png"></A> 
<BR>
<B> Next:</B> <A NAME="tex2html2788"
  HREF="node161.html" tppabs="http://eic.sourceforge.net/documentation/node161.html">Builtin-module's makefiles</A>
<B> Up:</B> <A NAME="tex2html2782"
  HREF="node151.html" tppabs="http://eic.sourceforge.net/documentation/node151.html">EiC modules</A>
<B> Previous:</B> <A NAME="tex2html2776"
  HREF="node159.html" tppabs="http://eic.sourceforge.net/documentation/node159.html">Initialising the module</A>
 &nbsp <B>  <A NAME="tex2html2784"
  HREF="node1.html" tppabs="http://eic.sourceforge.net/documentation/node1.html">Contents</A></B> 
 &nbsp <B>  <A NAME="tex2html2786"
  HREF="node166.html" tppabs="http://eic.sourceforge.net/documentation/node166.html">Index</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->

<H2><A NAME="SECTION00719000000000000000"></A>
<A NAME="sec:muliplexed_interface"></A><A NAME="25531"></A>
<A NAME="25532"></A>
<BR>
Multiplexed interfacing
</H2>

<P>
There is still the problem of multiplexing that must be addressed;
that is, interfacing to builtin functions that allow the call of
different functions according to predefined signals. At this stage, it
is upto the developer of the interface to decide which functions must
be mutliplexed and the level of multiplexing required. For example,
consider the problem of interfacing to a menu function that will call
different functions depending on which menu item is selected. As an
example, the interface to `foo2' will be modified for 3 levels of
multiplexing; that is, at any given instant it may make callbacks on
anyone of 3 functions:

<P>
<PRE>
        #define ML_0  3
        static int cbs_0 = 0;

        static void *EiC_Cfunc_0[ML_0];

        static int  MiddleOne_0(int x, int  x0, int  x1)
        {
            setArg(0, EiC_Cfunc_0[x], int ,x0);
            setArg(1, EiC_Cfunc_0[x], int ,x1);
        
            EiC_callBack(EiC_Cfunc_0[x]);
            return EiC_ReturnValue( int );
        }
        
        static int MiddleOne_0a(int x, int y) { return MiddleOne_0(0, x,y); }
        static int MiddleOne_0b(int x, int y) { return MiddleOne_0(1, x,y); }
        static int MiddleOne_0c(int x, int y) { return MiddleOne_0(2, x,y); }

        static void (*tabFunc_0[])() = {
                MiddleOne_0a,
                MiddleOne_0b,
                MiddleOne_0c,
        };

        static val_t eic_foo2(void)
        {
                val_t v;
                
                if(cbs_0 == ML_0) {
                  fprintf(stderr,"EiC : too many callbacks for foo2\n");
                  return v;
                }

                EiC_Cfunc_0[cbs_0] = arg(1,getargs(),ptr_t).p;
                v.ival = foo2(arg(0,getargs(),int),
                        tabFunc_0[cbs_0]);

                cb_0++;
        
                return v;
        }
</PRE>
<P>
The variable `EiC_Cfunc_0' is now defined as an array of pointers and
the `MiddleOne_0' function has been interfaced to via an array of
pointers to functions, each of which will pass the index to the
selected callback code stored in the `EiC_Cfunc_0' array, as well as
the variables passed from `foo2'. This is done via the use of the
function array `tabFunc_0'. On entry into `eic_foo2' a pointer to the
callback function is stored in `EiC_Cfunc_0' and a pointer to a
function stored in the function pointer array `tabFunc_0' is passed to
`foo2'.  In a interactive environment it might also be appropriate to
first search the array `EiC_Cfunc_0', to see if the incoming pointer
is already stored in `EiC_Cfunc_0' and to be able to reset `cb_0' back
to zero.

<P>
<HR>
<!--Navigation Panel-->
<A NAME="tex2html2787"
  HREF="node161.html" tppabs="http://eic.sourceforge.net/documentation/node161.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png" tppabs="http://eic.sourceforge.net/documentation/next.png"></A> 
<A NAME="tex2html2781"
  HREF="node151.html" tppabs="http://eic.sourceforge.net/documentation/node151.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png" tppabs="http://eic.sourceforge.net/documentation/up.png"></A> 
<A NAME="tex2html2775"
  HREF="node159.html" tppabs="http://eic.sourceforge.net/documentation/node159.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png" tppabs="http://eic.sourceforge.net/documentation/prev.png"></A> 
<A NAME="tex2html2783"
  HREF="node1.html" tppabs="http://eic.sourceforge.net/documentation/node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png" tppabs="http://eic.sourceforge.net/documentation/contents.png"></A> 
<A NAME="tex2html2785"
  HREF="node166.html" tppabs="http://eic.sourceforge.net/documentation/node166.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png" tppabs="http://eic.sourceforge.net/documentation/index.png"></A> 
<BR>
<B> Next:</B> <A NAME="tex2html2788"
  HREF="node161.html" tppabs="http://eic.sourceforge.net/documentation/node161.html">Builtin-module's makefiles</A>
<B> Up:</B> <A NAME="tex2html2782"
  HREF="node151.html" tppabs="http://eic.sourceforge.net/documentation/node151.html">EiC modules</A>
<B> Previous:</B> <A NAME="tex2html2776"
  HREF="node159.html" tppabs="http://eic.sourceforge.net/documentation/node159.html">Initialising the module</A>
 &nbsp <B>  <A NAME="tex2html2784"
  HREF="node1.html" tppabs="http://eic.sourceforge.net/documentation/node1.html">Contents</A></B> 
 &nbsp <B>  <A NAME="tex2html2786"
  HREF="node166.html" tppabs="http://eic.sourceforge.net/documentation/node166.html">Index</A></B> 
<!--End of Navigation Panel-->
<ADDRESS>
</td> <!-- End right-side page text -->
</tr> 
</table>
<!-- End master table -->
</ADDRESS>
</BODY>
</HTML>
