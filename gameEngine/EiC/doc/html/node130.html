<html><!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 2K.1beta (1.48)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>signal.h</TITLE>
<META NAME="description" CONTENT="signal.h">
<META NAME="keywords" CONTENT="EiC">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="Generator" CONTENT="LaTeX2HTML v2K.1beta">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="EiC.css" tppabs="http://eic.sourceforge.net/documentation/EiC.css">

<LINK REL="next" HREF="node131.html" tppabs="http://eic.sourceforge.net/documentation/node131.html">
<LINK REL="previous" HREF="node129.html" tppabs="http://eic.sourceforge.net/documentation/node129.html">
<LINK REL="up" HREF="node122.html" tppabs="http://eic.sourceforge.net/documentation/node122.html">
<LINK REL="next" HREF="node131.html" tppabs="http://eic.sourceforge.net/documentation/node131.html">
</HEAD>
<body bgcolor="ffffff" text="3e3e64" link="863644" vlink="8e4e5c" alink="8e4e5c">
<!-- StArT-EiC-top-LiNe -->
<table border="0" cellspacing="0" width="100%">
<tr>
<td bgcolor="3e3e64" align="center"><font size="4" color="999999">
#!/usr/bin/eic -f
</td></font>
<td bgcolor="3e3e64" align="center"><font size="3" color="999999">
int main() { printf("Hello World!\n"); return 0; }
</td></font>
<td bgcolor="3e3e64" align="center"><font size="3" color="999999">
EiC 1> Hello World!;
</td></font>
</table>
<!-- EnD-EiC-top-LiNe -->
<blockquote>
<!-- Begin-EiC-logo -->
<img src="logo.gif" tppabs="http://eic.sourceforge.net/images/logo.gif" border="0"><br>  
<!-- End-EiC-logo -->
</blockquote>
<hr size="1" width="93%">
<!-- The master table that contains the left nav bar and the right-side
     page text... -->
<table border="0">
<tr>
   <!-- Begin navbar -->
<td valign="top">
   <a href="javascript:if(confirm('http://eic.sourceforge.net/index.html  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://eic.sourceforge.net/index.html'" tppabs="http://eic.sourceforge.net/index.html"><img border="0" src="navbar_news.gif" tppabs="http://eic.sourceforge.net/images/navbar_news.gif"></a><br>
   <a href="javascript:if(confirm('http://eic.sourceforge.net/overview/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://eic.sourceforge.net/overview/'" tppabs="http://eic.sourceforge.net/overview/"><img border="0" src="navbar_overview.gif" tppabs="http://eic.sourceforge.net/images/navbar_overview.gif"></a><br>
   <a href="index.htm" tppabs="http://eic.sourceforge.net/documentation/"><img border="0" src="navbar_documentation.gif" tppabs="http://eic.sourceforge.net/images/navbar_documentation.gif"></a></br>
   <a href="javascript:if(confirm('http://eic.sourceforge.net/download/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://eic.sourceforge.net/download/'" tppabs="http://eic.sourceforge.net/download/"><img border="0" src="navbar_download.gif" tppabs="http://eic.sourceforge.net/images/navbar_download.gif"></a><br>
   <a href="javascript:if(confirm('http://eic.sourceforge.net/addons/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://eic.sourceforge.net/addons/'" tppabs="http://eic.sourceforge.net/addons/"><img border="0" src="navbar_addons.gif" tppabs="http://eic.sourceforge.net/images/navbar_addons.gif"></a><br>
   <a href="javascript:if(confirm('http://eic.sourceforge.net/links.html  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://eic.sourceforge.net/links.html'" tppabs="http://eic.sourceforge.net/links.html"><img border="0" src="navbar_links.gif" tppabs="http://eic.sourceforge.net/images/navbar_links.gif"></a><br>
   <a href="javascript:if(confirm('http://eic.sourceforge.net/support/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://eic.sourceforge.net/support/'" tppabs="http://eic.sourceforge.net/support/"><img border="0" src="navbar_support.gif" tppabs="http://eic.sourceforge.net/images/navbar_support.gif"></a><br>
<br><br>
<!-- Begin sponsors -->
 <font size = "-1"> Sponsors:<br> </font>
 <a href="javascript:if(confirm('http://sourceforge.net/  \n\nThis file was not retrieved by Teleport Pro, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?'))window.location='http://sourceforge.net/'" tppabs="http://sourceforge.net/"><img src="sflogo.php-group_id=6113&type=4" tppabs="http://sourceforge.net/sflogo.php?group_id=6113&type=4" width="125" height="38" border="0" alt="SourceForge.net Logo"></a> <br>
<!-- End sponsors -->
</td>
   <!-- End navbar -->
   <!-- Begin right-side page data -->
<td valign="top">  <font size="3" face="Helvetica">
<!--Navigation Panel-->
<A NAME="tex2html2346"
  HREF="node131.html" tppabs="http://eic.sourceforge.net/documentation/node131.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png" tppabs="http://eic.sourceforge.net/documentation/next.png"></A> 
<A NAME="tex2html2340"
  HREF="node122.html" tppabs="http://eic.sourceforge.net/documentation/node122.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png" tppabs="http://eic.sourceforge.net/documentation/up.png"></A> 
<A NAME="tex2html2334"
  HREF="node129.html" tppabs="http://eic.sourceforge.net/documentation/node129.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png" tppabs="http://eic.sourceforge.net/documentation/prev.png"></A> 
<A NAME="tex2html2342"
  HREF="node1.html" tppabs="http://eic.sourceforge.net/documentation/node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png" tppabs="http://eic.sourceforge.net/documentation/contents.png"></A> 
<A NAME="tex2html2344"
  HREF="node166.html" tppabs="http://eic.sourceforge.net/documentation/node166.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png" tppabs="http://eic.sourceforge.net/documentation/index.png"></A> 
<BR>
<B> Next:</B> <A NAME="tex2html2347"
  HREF="node131.html" tppabs="http://eic.sourceforge.net/documentation/node131.html">stdarg.h</A>
<B> Up:</B> <A NAME="tex2html2341"
  HREF="node122.html" tppabs="http://eic.sourceforge.net/documentation/node122.html">Standard C libraries</A>
<B> Previous:</B> <A NAME="tex2html2335"
  HREF="node129.html" tppabs="http://eic.sourceforge.net/documentation/node129.html">setjmp.h</A>
 &nbsp <B>  <A NAME="tex2html2343"
  HREF="node1.html" tppabs="http://eic.sourceforge.net/documentation/node1.html">Contents</A></B> 
 &nbsp <B>  <A NAME="tex2html2345"
  HREF="node166.html" tppabs="http://eic.sourceforge.net/documentation/node166.html">Index</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->

<H2><A NAME="SECTION00618000000000000000"></A>
<A NAME="15677"></A>
<A NAME="sec:signalh"></A>
<BR>
signal.h
</H2>

<P>
The header <code>&lt;signal.h&gt;</code> declares the following macros:

<P>
 

<DL COMPACT>
<DT>SIGABRT
<DD><A NAME="15681"></A>
<A NAME="item:SIGABRT"></A>     abnormal termination
<DT>SIGFPE
<DD><A NAME="15683"></A>
<A NAME="item:SIGFPE"></A>     arithmetic error
<DT>SIGILL
<DD><A NAME="15685"></A>
<A NAME="item:SIGILL"></A>     illegal function image
<DT>SIGINT
<DD><A NAME="15687"></A>
<A NAME="item:SIGINT"></A>     interactive attention
<DT>SIGSEGV
<DD><A NAME="15689"></A>
<A NAME="item:SIGSEGV"></A>	illegal storage access
<DT>SIGTERM
<DD><A NAME="15691"></A>
<A NAME="item:SIGTERM"></A>     termination request sent to program

<P>
</DD>
</DL><FONT SIZE="-1"> </FONT>
<P>
The header <code>&lt;signal.h&gt;</code> defines the following macro functions, which can be used
to specify the action for the signal:

<P>
 

<DL COMPACT>
<DT>SIG_DFL
<DD><A NAME="15696"></A>
<A NAME="item:SIGDFL"></A>	 specifies the default action for the particular signal. 
<DT>SIG_IGN
<DD><A NAME="15698"></A>
<A NAME="item:SIGIGN"></A> specifies that the signal should be ignored. 

<P>
</DD>
</DL><FONT SIZE="-1"> </FONT>
<P>
If a signal cannot honored its call, it returns <B><TT>SIG_ERR</TT></B>.

<P>
 

<DL COMPACT>
<DT>SIG_ERR
<DD><A NAME="15704"></A>
<A NAME="item:SIGERR"></A>This macro is used as a return value to indicate an error.

<P>
</DD>
</DL><FONT SIZE="-1"> </FONT>
<P>
EiC also supports POSIX.1 signals (see&nbsp;&#167;&nbsp;<A HREF="node143.html#sec:signalhPosix" tppabs="http://eic.sourceforge.net/documentation/node143.html#sec:signalhPosix">4.2.5</A>, pg:&nbsp;<A HREF="node143.html#sec:signalhPosix" tppabs="http://eic.sourceforge.net/documentation/node143.html#sec:signalhPosix"><IMG  ALIGN="BOTTOM" BORDER="1" ALT="[*]" SRC="crossref.png" tppabs="http://eic.sourceforge.net/documentation/crossref.png"></A>).

<P>
The following functions are defined in <code>&lt;signal.h&gt;</code>:

<P>
 

<DL COMPACT>
<DT>signal
<DD><A NAME="item:signal"></A><A NAME="15711"></A>
<B><TT>Synopsis</TT></B>:


<BLOCKQUOTE></BLOCKQUOTE><PRE>
#include &lt;signal.h&gt;
void (*signal(int sig, void (*handler)(int)))(int);
</PRE><BLOCKQUOTE></BLOCKQUOTE>
<P>
Install <B><TT>handler</TT></B> for subsequent signal <B><TT>sig</TT></B>. If <B><TT>handler</TT></B>
     is <B><TT>SIG_DFL</TT></B>, implementation-defined default behaviour is
     used; if <B><TT>handler</TT></B> is <B><TT>SIG_IGN</TT></B>, signal is ignored;
     otherwise function pointed to by handler is called with argument
     <B><TT>sig</TT></B>. signal returns the previous handler or <B><TT>SIG_ERR</TT></B> on
     error.  When signal <B><TT>sig</TT></B> subsequently occurs, the signal is
     restored to its default behaviour and the <B><TT>handler</TT></B> is
     called. If the <B><TT>handler</TT></B> returns, execution resumes where the
     signal occurred. The initial state of the signals is
     implementation-defined.

<P>
When you install a signal handler  within EiC you will most likely be overriding one of
EiC's own internal signal handling routines:

<P>


<BLOCKQUOTE></BLOCKQUOTE><PRE>
EiC 1&gt; #include &lt;signal.h&gt;
        	(void)
EiC 2&gt; raise(SIGFPE);

EiC maths  exception, file ::EiC::, line 2
EiC::Reset Local Stack Pointer
EiC: error clean up entry pt 0,1,2,3,4,
</PRE><BLOCKQUOTE></BLOCKQUOTE>
<P>
EiC assigns handlers for the following signals: <B><TT>SIGBUS,
SIGFPE, SIGILL, SIGINT, SIGSEGV, SIGUSR1</TT></B>.  It does this to keep the
flow of an EiC interactive session going. That is, it prevents your
code from causing EiC to abort in an undignified manner. While, in
none-interactive mode it is no big deal if you override one of EiC's
internal signal handlers, since you are saying that you will be
handling that signal, but in an interactive session, things are
different. You load translation units (&#167;&nbsp;<A HREF="node41.html#sec:PhasesTranslation" tppabs="http://eic.sourceforge.net/documentation/node41.html#sec:PhasesTranslation">3.1</A>, pg:&nbsp;<A HREF="node41.html#sec:PhasesTranslation" tppabs="http://eic.sourceforge.net/documentation/node41.html#sec:PhasesTranslation"><IMG  ALIGN="BOTTOM" BORDER="1" ALT="[*]" SRC="crossref.png" tppabs="http://eic.sourceforge.net/documentation/crossref.png"></A>),
execute them, and various translation units may have no
relationship to each other. Therefore, when you assign a new signal handler
you should keep track of the initial one and reset it when appropriate:

<P>


<BLOCKQUOTE></BLOCKQUOTE><PRE>
EiC 1&gt; #include &lt;signal.h&gt;
        (void)
EiC 2&gt; void foo(int sig) { printf("my handle\n"); }
        (void)
EiC 3&gt; void (*oldhandle)(int) = signal(SIGFPE,foo);
        (void)
EiC 4&gt; raise(SIGFPE);
SIGFPE passed
        0
EiC 5&gt; signal(SIGFPE,oldhandle); // reestablish old handle
        0x80babe8
EiC 6&gt; raise(SIGFPE);           

EiC maths  exception, file ::EiC::, line 6
EiC::Reset Local Stack Pointer
EiC: error clean up entry pt 0,1,2,3,4,
</PRE><BLOCKQUOTE></BLOCKQUOTE>
<P>
<DT>raise
<DD><A NAME="item:raise"></A><A NAME="15739"></A>
<B><TT>Synopsis</TT></B>:


<BLOCKQUOTE></BLOCKQUOTE><PRE>
#include &lt;signal.h&gt;
int raise(int sig);
</PRE><BLOCKQUOTE></BLOCKQUOTE>
<P>
Send signal <B><TT>sig</TT></B> to the program. Non-zero returned if unsuccessful. 

<P>
As an example program try <B><TT>examples/sig1.c</TT></B>

<P>


<BLOCKQUOTE></BLOCKQUOTE><PRE>
#include &lt;stdio.h&gt;
#include &lt;signal.h&gt;
#include &lt;unistd.h&gt;
void tick(int i) { printf("tick\n"); return;}
void tock(int i) { printf("tock\n"); return;}
int main()
{
    int i = 0, cnt = 1;
    while(1) {
        signal(SIGINT,tick); // note you must reestablish the handler 
        sleep(1);
        raise(SIGINT);
        
        signal(SIGINT,tock);  
        sleep(1); 
        raise(SIGINT);
        if(i++==cnt) 
            break;         
    }
    signal(SIGINT,SIG_DFL);  // reset 
    return 0;                               
}
</PRE><BLOCKQUOTE></BLOCKQUOTE>
<P>
Which should out put:


<BLOCKQUOTE></BLOCKQUOTE><PRE>
%&gt; eic examples/sig1.c
tick
tock
tick
tock
</PRE><BLOCKQUOTE></BLOCKQUOTE>
<P>
</DD>
</DL><FONT SIZE="-1"> </FONT>
<P>
<HR>
<!--Navigation Panel-->
<A NAME="tex2html2346"
  HREF="node131.html" tppabs="http://eic.sourceforge.net/documentation/node131.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png" tppabs="http://eic.sourceforge.net/documentation/next.png"></A> 
<A NAME="tex2html2340"
  HREF="node122.html" tppabs="http://eic.sourceforge.net/documentation/node122.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png" tppabs="http://eic.sourceforge.net/documentation/up.png"></A> 
<A NAME="tex2html2334"
  HREF="node129.html" tppabs="http://eic.sourceforge.net/documentation/node129.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png" tppabs="http://eic.sourceforge.net/documentation/prev.png"></A> 
<A NAME="tex2html2342"
  HREF="node1.html" tppabs="http://eic.sourceforge.net/documentation/node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png" tppabs="http://eic.sourceforge.net/documentation/contents.png"></A> 
<A NAME="tex2html2344"
  HREF="node166.html" tppabs="http://eic.sourceforge.net/documentation/node166.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png" tppabs="http://eic.sourceforge.net/documentation/index.png"></A> 
<BR>
<B> Next:</B> <A NAME="tex2html2347"
  HREF="node131.html" tppabs="http://eic.sourceforge.net/documentation/node131.html">stdarg.h</A>
<B> Up:</B> <A NAME="tex2html2341"
  HREF="node122.html" tppabs="http://eic.sourceforge.net/documentation/node122.html">Standard C libraries</A>
<B> Previous:</B> <A NAME="tex2html2335"
  HREF="node129.html" tppabs="http://eic.sourceforge.net/documentation/node129.html">setjmp.h</A>
 &nbsp <B>  <A NAME="tex2html2343"
  HREF="node1.html" tppabs="http://eic.sourceforge.net/documentation/node1.html">Contents</A></B> 
 &nbsp <B>  <A NAME="tex2html2345"
  HREF="node166.html" tppabs="http://eic.sourceforge.net/documentation/node166.html">Index</A></B> 
<!--End of Navigation Panel-->
<ADDRESS>
</td> <!-- End right-side page text -->
</tr> 
</table>
<!-- End master table -->
</ADDRESS>
</BODY>
</HTML>
